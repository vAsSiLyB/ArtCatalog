[(#REM) 
	Zone de saisie de date utilsant le dateur de Bonux si pr√©sent.
	Sur les sites en HTML5, utilise type="date"
	sur le input, et type="text" par d√©faut pour les autres.
	Pour tous on utilise class="date" et class="heure" pour activer le dateur.
	
	La valeur fournie peut √™tre :
	- au format spip jj/mm/aaaa (date uniquement)
	- au format SQL aaaa-mm-jj (date uniquement)
	- au format SQL aaaa-mm-jj hh:mm:ss (date et heure)
	- un tableau avec une entr√©e "date" et une entr√©e "heure" s√©par√©e, au format SQL (date et heure obligatoire)
	
	Pour utiliser les heures, il faut utiliser l'option "horaire=oui".
	
	La date est propos√©e √† l'affichage au format jj/mm/aaaa.
]

[(#REM) Initialisation de la valeur ]
#SET{valeur,#ENV{valeur_forcee,#ENV{valeur,#ENV{defaut}}}}

[(#REM) Regex de date SQL ]
#SET{date_sql,"[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]( [0-9][0-9]:[0-9][0-9]:[0-9][0-9])?"}

[(#REM) Si la valeur est un tableau, on consid√®re que c'est date et heure dans un format d√©j√† reconnu (j/m/a ou SQL) ]
[(#GET{valeur}|is_array|oui)
	#SET{date, #GET{valeur}|table_valeur{date}}
	#SET{heure, #GET{valeur}|table_valeur{heure}}
]

[(#REM) Si la valeur est une cha√Æne, on regarde si SQL ]
[(#GET{valeur}|is_string|oui)
	[(#REM) Par d√©faut (date uniquement au format SPIP) la date c'est toute la valeur ]
	#SET{date, #GET{valeur}}
	#SET{heure, ''}
	
	[(#REM) Si c'est bien une date SQL ]
	[(#GET{valeur}|match{#GET{date_sql}}|oui)
		[(#REM) Si la date est compl√®tement 0, on met des valeurs vides ]
		[(#GET{valeur}|=={0000-00-00 00:00:00}|oui)
			#SET{date, ''}
			#SET{heure, ''}
		]
		[(#GET{valeur}|=={0000-00-00 00:00:00}|non)
			#SET{date, #GET{valeur}|affdate{d/m/Y}}
			#SET{heure, #GET{valeur}|affdate{H:i}}
		]
	]
]

<b> [(#GET{date}|affdate{annee})] </b>
[(#INCLURE{fond=saisies/input,
	env,
	nom=#ENV{nom}[(#ENV{horaire}|?{&#91;date&#93;})],
	valeur=#GET{date},
	type=#HTML5|?{date,text},
	class=[(#ENV{class}) ]date [(#GET{date}) date_annee ]})]
<img class="aide" title="Formats acceptÈs : 15-06-1974 ou 15/06/1974 ou 15061974 ou 150674 ou 1974 ou 74" alt="AIDE" src="../prive/themes/spip/images/aide-16.png" style="margin-left:12px;"/>
[(#ENV{horaire}|oui)
[(#INCLURE{fond=saisies/input,
	env,
	nom=#ENV{nom}&#91;heure&#93;,
	valeur=#GET{heure},
	size=4,
	maxlength=5,
	class=[(#ENV{class}) ]heure})]
]
[(#ENV{disable}|non|et{#ENV{readonly}|non})[(#INCLURE{fond=formulaires/dateur/inc-dateur, heure_pas=#ENV{heure_pas,30}})]]
